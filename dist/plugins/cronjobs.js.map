{"version":3,"file":"cronjobs.js","sourceRoot":"/","sources":["plugins/cronjobs.ts"],"names":[],"mappings":";;;;;AAAA,iDAAoF;AACpF,+CAAwD;AACxD,yCAAgD;AAChD,+BAA8B;AAC9B,oEAA+B;AAE/B,kBAAe,IAAA,wBAAE,EAAC,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE;IACzC,MAAM,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,cAAO,EAAE,kBAAkB,CAAC,CAAA;IAClF,MAAM,mBAAmB,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,cAAO,EAAE,wBAAwB,CAAC,CAAA;IACjG,MAAM,mBAAmB,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,cAAO,EAAE,sBAAsB,CAAC,CAAA;IAC/F,MAAM,cAAc,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,cAAO,EAAE,mBAAmB,CAAC,CAAA;IACvF,MAAM,aAAa,GAAG,IAAI,UAAU,CAAC,aAAa,EAAE,KAAK,IAAI,EAAE,CAAC,MAAM,IAAA,8BAAoB,EAAC,OAAO,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,gBAAgB,CAAC,CAAA;IAElI,MAAM,mBAAmB,GAAG,IAAI,mBAAmB,CACjD,aAAa,EACb,KAAK,IAAI,EAAE,CAAC,MAAM,IAAA,sCAA2B,EAAC,OAAO,CAAC,EACtD,IAAI,EACJ,IAAI,EACJ,gBAAgB,CACjB,CAAA;IACD,MAAM,oBAAoB,GAAG,IAAI,mBAAmB,CAAC,cAAc,EAAE,KAAK,IAAI,EAAE,CAAC,MAAM,IAAA,6BAAkB,EAAC,OAAO,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,gBAAgB,CAAC,CAAA;IACjJ,MAAM,UAAU,GAAG,IAAI,cAAc,CAAC,aAAa,EAAE,KAAK,IAAI,EAAE,CAAC,MAAM,IAAA,sBAAe,EAAC,OAAO,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,gBAAgB,CAAC,CAAA;IAC9H,aAAa,CAAC,KAAK,EAAE,CAAA;IACrB,mBAAmB,CAAC,KAAK,EAAE,CAAA;IAC3B,oBAAoB,CAAC,KAAK,EAAE,CAAA;IAC5B,UAAU,CAAC,KAAK,EAAE,CAAA;IAClB,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAA;IAChC,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE,SAAS,CAAC,CAAA;AACzC,CAAC,CAAC,CAAA","sourcesContent":["import { getFixturesResults, getUpcomingFixturesCronjobs } from '@cronjobs/fixtures'\nimport { createLeaguesCronjob } from '@cronjobs/leagues'\nimport { getFixturesOdds } from '@cronjobs/odds'\nimport { CronJob } from 'cron'\nimport fp from 'fastify-plugin'\n\nexport default fp(async (fastify, _opts) => {\n  const LeagueCron = fastify.Sentry.cron.instrumentCron(CronJob, 'get_leagues_cron')\n  const UpcomingFixtureCron = fastify.Sentry.cron.instrumentCron(CronJob, 'upcoming_fixtures_cron')\n  const FixturesResultsCron = fastify.Sentry.cron.instrumentCron(CronJob, 'fixtures_result_cron')\n  const GetOddsCronJob = fastify.Sentry.cron.instrumentCron(CronJob, 'fixture_odds_cron')\n  const getLeaguesJob = new LeagueCron('15 00 1 * *', async () => await createLeaguesCronjob(fastify), null, null, 'Africa/Nairobi')\n\n  const upcomingFixturesJob = new UpcomingFixtureCron(\n    '30 03 * * *',\n    async () => await getUpcomingFixturesCronjobs(fastify),\n    null,\n    null,\n    'Africa/Nairobi',\n  )\n  const getFixtureResultsJob = new FixturesResultsCron('*/20 * * * *', async () => await getFixturesResults(fastify), null, null, 'Africa/Nairobi')\n  const getOddsJob = new GetOddsCronJob('16 22 * * *', async () => await getFixturesOdds(fastify), null, null, 'Africa/Nairobi')\n  getLeaguesJob.start()\n  upcomingFixturesJob.start()\n  getFixtureResultsJob.start()\n  getOddsJob.start()\n  console.log('Cron Jobs Started')\n  fastify.decorate('cronjobs', undefined)\n})\n"]}